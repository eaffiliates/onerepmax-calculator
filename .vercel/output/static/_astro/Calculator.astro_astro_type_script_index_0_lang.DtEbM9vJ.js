import{c as h,f as b}from"./formulas.DWyL16yr.js";import{g as I,c as S,p as T}from"./permalink.JJuONHLe.js";let r="lb",i=null;const d=document.getElementById("weight"),u=document.getElementById("reps"),y=document.getElementById("calculate-btn"),m=document.getElementById("kg-btn"),g=document.getElementById("lb-btn"),L=document.getElementById("results-section"),B=document.getElementById("empty-state"),p=document.getElementById("validation-error"),E=document.getElementById("median-result"),f=document.getElementById("share-btn"),k=document.getElementById("additional-tools");function O(){const t=T();t.weight&&(d.value=t.weight.toString()),t.reps&&(u.value=t.reps.toString()),t.units&&(r=t.units,v()),t.weight&&t.reps&&w()}function v(){r==="kg"?(m.classList.add("bg-white","text-gray-900","shadow-md"),m.classList.remove("text-gray-600"),g.classList.add("text-gray-600"),g.classList.remove("bg-white","text-gray-900","shadow-md")):(g.classList.add("bg-white","text-gray-900","shadow-md"),g.classList.remove("text-gray-600"),m.classList.add("text-gray-600"),m.classList.remove("bg-white","text-gray-900","shadow-md"))}function C(t){if(r===t)return;const e=parseFloat(d.value);if(!isNaN(e)){const n=S(e,r,t);d.value=n.toFixed(t==="kg"?1:0)}d.step=t==="kg"?"0.5":"1";const o=document.getElementById("weight-help");o&&(o.textContent=`Weight you lifted (in ${t})`),r=t,v(),i&&M(i)}function P(){const t=parseFloat(d.value),e=parseInt(u.value);return isNaN(t)||t<=0?"Please enter a valid weight greater than 0":isNaN(e)||e<1||e>12?"Please enter reps between 1 and 12 for accurate estimates":null}function w(){const t=P();if(t){p.textContent=t,p.classList.remove("hidden"),y.disabled=!0,W();return}p.classList.add("hidden"),y.disabled=!1,R()}function W(){L.classList.add("hidden"),B.classList.remove("hidden"),k.classList.add("hidden")}function R(){const t=parseFloat(d.value),e=parseInt(u.value);console.log("Calculating with:",{weight:t,reps:e,currentUnit:r}),console.log("calculateOneRM function:",typeof h);try{if(typeof h!="function"){if(console.log("Using inline function"),t<=0||e<1||e>12)throw new Error("Invalid input: weight must be positive and reps between 1-12");const o=t*(1+e/30),n=e>=37?t*2:t*36/(37-e),s=t*Math.pow(e,.1),c=t*(1+.025*e),a=[o,n,s,c],l=a.reduce((N,$)=>N+$,0)/a.length,x=Math.min(...a),F=Math.max(...a);i={epley:o,brzycki:n,lombardi:s,oconnor:c,median:l,average:l,min:x,max:F}}else{console.log("Using imported function"),i=h(t,e);const o=[i.epley,i.brzycki,i.lombardi,i.oconnor];i.median=o.reduce((n,s)=>n+s,0)/o.length,i.average=i.median}console.log("Calculation results:",i),M(i),H()}catch(o){console.error("Calculation error:",o),p.textContent=`Error calculating 1RM: ${o.message}. Please check your inputs.`,p.classList.remove("hidden")}}function M(t){const e=r==="kg";B.classList.add("hidden"),L.classList.remove("hidden"),k.classList.remove("hidden");const n=typeof b=="function"?b:(c,a)=>{const l=a?.5:1;return`${(Math.round(c/l)*l).toFixed(a?1:0)}${a?"kg":"lb"}`};E&&(E.textContent=n(t.median,e)),document.getElementById("min-result")&&(document.getElementById("min-result").textContent=n(t.min,e)),document.getElementById("max-result")&&(document.getElementById("max-result").textContent=n(t.max,e)),A(t),z(t.median);const s=`1RM calculated: ${n(t.median,e)} with range from ${n(t.min,e)} to ${n(t.max,e)}`;j(s)}function A(t){console.log("Confidence range updated:",{min:t.min,max:t.max})}function z(t){try{U(t)}catch(e){console.warn("Error updating additional tools:",e)}}function U(t){const e=r==="kg",o=(s,c)=>{const a=c?.5:1;return`${(Math.round(s/a)*a).toFixed(c?1:0)} ${c?"kg":"lb"}`};[40,60,75,85,95].forEach(s=>{const c=document.getElementById(`warmup-${s}`);if(c){const a=Math.round(t*s/100);c.textContent=o(a,e)}})}function H(){if(typeof window>"u")return;const t=parseFloat(d.value),e=parseInt(u.value);if(!isNaN(t)&&!isNaN(e)){const n=I({weight:t,reps:e,units:r});window.history.replaceState({},"",n)}}function j(t){const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.textContent=t,document.body.appendChild(e),setTimeout(()=>document.body.removeChild(e),1e3)}m.addEventListener("click",()=>C("kg"));g.addEventListener("click",()=>C("lb"));d.addEventListener("input",w);u.addEventListener("input",w);y.addEventListener("click",R);f.addEventListener("click",async()=>{const t=I({weight:parseFloat(d.value),reps:parseInt(u.value),units:r});try{await navigator.clipboard.writeText(t),f.textContent="âœ“ Copied!",setTimeout(()=>f.textContent="ðŸ“‹ Copy Link",2e3)}catch(e){console.error("Failed to copy link:",e)}});O();v();
